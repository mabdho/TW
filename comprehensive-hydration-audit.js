#!/usr/bin/env node
import e from"fs"
import t from"path"
import{JSDOM as r}from"jsdom"
class i{constructor(){this.results={passed:[],failed:[],warnings:[],totalChecks:0,passedChecks:0}}parseHTMLContent(t){if(!e.existsSync(t))return null
const i=e.readFileSync(t,"utf8"),o=new r(i).window.document
return{title:o.querySelector("title")?.textContent?.trim()||"",metaDescription:o.querySelector('meta[name="description"]')?.getAttribute("content")?.trim()||"",h1:Array.from(o.querySelectorAll("h1")).map(e=>e.textContent.trim()),h2:Array.from(o.querySelectorAll("h2")).map(e=>e.textContent.trim()),h3:Array.from(o.querySelectorAll("h3")).map(e=>e.textContent.trim()),canonicalUrl:o.querySelector('link[rel="canonical"]')?.getAttribute("href")||"",metaKeywords:o.querySelector('meta[name="keywords"]')?.getAttribute("content")||"",metaAuthor:o.querySelector('meta[name="author"]')?.getAttribute("content")||"",ogTitle:o.querySelector('meta[property="og:title"]')?.getAttribute("content")||"",ogDescription:o.querySelector('meta[property="og:description"]')?.getAttribute("content")||"",ogImage:o.querySelector('meta[property="og:image"]')?.getAttribute("content")||"",ogUrl:o.querySelector('meta[property="og:url"]')?.getAttribute("content")||"",ogType:o.querySelector('meta[property="og:type"]')?.getAttribute("content")||"",ogSiteName:o.querySelector('meta[property="og:site_name"]')?.getAttribute("content")||"",twitterCard:o.querySelector('meta[name="twitter:card"]')?.getAttribute("content")||"",twitterTitle:o.querySelector('meta[name="twitter:title"]')?.getAttribute("content")||"",twitterDescription:o.querySelector('meta[name="twitter:description"]')?.getAttribute("content")||"",twitterImage:o.querySelector('meta[name="twitter:image"]')?.getAttribute("content")||"",structuredData:Array.from(o.querySelectorAll('script[type="application/ld+json"]')).map(e=>{try{return JSON.parse(e.textContent)}catch(t){return null}}).filter(Boolean),navigation:Array.from(o.querySelectorAll("nav a, header a")).map(e=>({text:e.textContent.trim(),href:e.getAttribute("href")})),breadcrumbs:Array.from(o.querySelectorAll('[aria-label*="breadcrumb"] a, .breadcrumb a, nav[aria-label="Breadcrumb"] a')).map(e=>({text:e.textContent.trim(),href:e.getAttribute("href")})),internalLinks:Array.from(o.querySelectorAll('a[href^="/"], a[href^="./"], a[href^="../"]')).map(e=>({text:e.textContent.trim(),href:e.getAttribute("href")})),preconnectLinks:Array.from(o.querySelectorAll('link[rel="preconnect"]')).map(e=>e.getAttribute("href")),prefetchLinks:Array.from(o.querySelectorAll('link[rel="prefetch"]')).map(e=>e.getAttribute("href")),preloadLinks:Array.from(o.querySelectorAll('link[rel="preload"]')).map(e=>({href:e.getAttribute("href"),as:e.getAttribute("as")})),images:Array.from(o.querySelectorAll("img")).map(e=>({src:e.getAttribute("src"),alt:e.getAttribute("alt")||"",title:e.getAttribute("title")||"",loading:e.getAttribute("loading")||"",width:e.getAttribute("width")||"",height:e.getAttribute("height")||""})),contentSections:Array.from(o.querySelectorAll("section, article, main")).map(e=>({tagName:e.tagName.toLowerCase(),id:e.id||"",className:e.className||"",textLength:e.textContent.trim().length}))}}extractReactSEOData(e){return{"Home Page":{title:"Best Travel Guides & Destinations - TravelWanders",metaDescription:"Discover amazing travel destinations with TravelWanders. Find comprehensive city guides, hidden gems, and travel tips for your next adventure.",h1:["Explore the world with confidence"]},"Blogs Page":{title:"Travel Blog Stories & Destination Guides - TravelWanders",metaDescription:"Get inspired with our travel stories, tips, and destination guides from expert travelers around the world. Discover hidden gems and travel inspiration.",h1:["Travel Blog"]},"Destinations Page":{title:"All Destinations - TravelWanders",metaDescription:"Browse our complete collection of travel destinations with detailed guides, attractions, and insider tips for amazing cities worldwide.",h1:["All Destinations"]},"London City Page":{title:"15 Best Things to Do in London, United Kingdom (2025 Guide)",metaDescription:"Discover the best things to do in London with this comprehensive 2025 guide. From iconic Tower of London to hidden gems, explore top attractions and",h1:["15 Best Things to Do in London, United Kingdom (2025 Guide)"]},"Rome City Page":{title:"15 Best Things to Do in Rome, Italy (2025 Guide)",metaDescription:"Discover the best things to do in Rome with this comprehensive 2025 guide. From the Colosseum to Vatican City, explore top attractions and insider tips for",h1:["15 Best Things to Do in Rome, Italy (2025 Guide)"]},"Edinburgh City Page":{title:"15 Best Things to Do in Edinburgh, United Kingdom (2025 Guide)",metaDescription:"Planning a trip to Edinburgh? Wondering about the best things to do in Edinburgh? You're in the right place! This guide is packed with must-see attractions, ...",h1:["15 Best Things to Do in Edinburgh, United Kingdom (2025 Guide)"]},"Individual Blog Post":{title:"Underrated Destinations for Solo Travelers - TravelWanders",metaDescription:"Looking to explore beyond the typical solo travel spots? There are plenty of underrated destinations that offer a unique experience without the crowds. From the charming streets of Ljubljana to the vibrant culture of Oaxaca, these hidden gems provide a perfect mix of tranquility, adventure, and authentic local vibes.",h1:["Underrated Destinations for Solo Travelers"]},"Cookie Policy":{title:"Cookie Policy | TravelWanders Travel Guide Platform",metaDescription:"Cookie Policy for TravelWanders - Learn about how we use cookies and similar technologies to enhance your travel guide experience.",h1:["Cookie Policy"]},"Privacy Policy":{title:"Privacy Policy - TravelWanders",metaDescription:"Privacy Policy for TravelWanders - Learn how we collect, use, and protect your personal information when you use our travel guide platform.",h1:["Privacy Policy"]},"Terms of Service":{title:"Terms of Service & User Agreement - TravelWanders",metaDescription:"Terms of Service for TravelWanders - Understand the rules and guidelines for using our travel guide platform and services.",h1:["Terms of Service"]}}[e]||{}}compareValues(e,t,r,i,o){this.results.totalChecks++
const a=r===i
return a&&this.results.passedChecks++,{category:e,field:t,expected:r,actual:i,matches:a,page:o}}compareArrays(e,t,r,i,o){this.results.totalChecks++
const a=JSON.stringify(r.sort())===JSON.stringify(i.sort())
return a&&this.results.passedChecks++,{category:e,field:t,expected:r,actual:i,matches:a,page:o}}auditPageComprehensive(e,t){void 0
const r=this.parseHTMLContent(t)
if(!r)return void 0,null
const i=this.extractReactSEOData(e),o={page:e,htmlPath:t,checks:[],passed:0,failed:0},a=this.compareValues("Basic SEO","Title",i.title,r.title,e),s=this.compareValues("Basic SEO","Meta Description",i.metaDescription,r.metaDescription,e),n=this.compareArrays("Basic SEO","H1 Tags",i.h1||[],r.h1,e)
return o.checks.push(a,s,n),a.matches,s.matches,n.matches,r.structuredData.forEach((e,t)=>{void 0}),r.images.filter(e=>e.alt).length,r.images.filter(e=>e.width&&e.height).length,r.images.filter(e=>"lazy"===e.loading).length,void 0,o.passed=o.checks.filter(e=>e.matches).length,o.failed=o.checks.length-o.passed,o.checks.length>0&&(o.passed/o.checks.length*100).toFixed(1),void 0,0===o.failed?this.results.passed.push(o):this.results.failed.push(o),o}async runComprehensiveAudit(){void 0
const e=[{name:"Home Page",path:"dist/public/home-seo.html"},{name:"Blogs Page",path:"dist/public/blogs-seo.html"},{name:"Destinations Page",path:"dist/public/destinations-seo.html"},{name:"London City Page",path:"dist/public/best-things-to-do-in-london/index.html"},{name:"Rome City Page",path:"dist/public/best-things-to-do-in-rome/index.html"},{name:"Edinburgh City Page",path:"dist/public/best-things-to-do-in-edinburgh.html"},{name:"Individual Blog Post",path:"dist/public/blog/underrated-destinations-for-solo-travelers.html"},{name:"Cookie Policy",path:"dist/public/cookie-policy.html"},{name:"Privacy Policy",path:"dist/public/privacy-policy.html"},{name:"Terms of Service",path:"dist/public/terms-of-service.html"}]
for(const t of e)this.auditPageComprehensive(t.name,t.path)
this.generateComprehensiveReport()}generateComprehensiveReport(){void 0
const e=this.results.passed.length+this.results.failed.length
e>0&&(this.results.passed.length/e*100).toFixed(1),this.results.totalChecks>0&&(this.results.passedChecks/this.results.totalChecks*100).toFixed(1),void 0,this.results.failed.length>0&&(void 0,this.results.failed.forEach(e=>{e.checks.length>0&&(e.passed/e.checks.length*100).toFixed(1),void 0,e.checks.forEach(e=>{e.matches})})),this.results.passed.length>0&&(void 0,this.results.passed.forEach(e=>{void 0})),this.results.failed.length}}(async function(){const e=new i
await e.runComprehensiveAudit()})().catch(console.error)
export{i as ComprehensiveHydrationAuditor}
